---
title:  "Gov 50 Final Project"
author: "Patrick Pieper"
description: An investigation into the academic performance of Harvard Students based on set variables. This paper will use GPA/grades of students and plot them against data from their student profile. Depending on the availability of the data, factors examined will include, ethnicity, nationality, intended concentration, number of courses a semester, gender, age, private or public high school etc. In analysing the data, the data will be plotted in order to determine trends and an attempt will be made at deducing the expected academic success of a student based on their profile. 
output:
  distill::distill_article:
    self_contained: false
---


## Project thoughts

I was initially interested in exploring data related to the grades of Harvard students, depending on the attributes of their choice in classes. Thinking about trends in well-performing students, I decided to broaden my set of variables - thinking of nationality, ethnicity, concentration etc. - which would be interesting to analyze and compare. Ultimately, I would like to discern whether it is possible to guess a student's academic performance based on a set of determined variables - or at least compare trends.


## Data Sources

I've reached out to the Office of Institutional Research as well as the Registrar to discuss the possibility of obtaining data from student records. I will also discuss which sets of data from students they record, and will adjust my strategy slightly depending on the availability.

## Proposal
Can the academic success of a student at Harvard be foretold? Are certain student-profiles likelier to do well than others? In this study I plan to examine the profiles of students at Harvard and plot these against their grades/GPA. In doing so, I hope to classify students into groups based on their academic performance and profile, in order to find correlation. A large set of variables will be observed at first - including but not limited to: ethnicity, nationality, intended concentration, number of courses a semester, gender, age, private or public high school, athletic affiliation, extracurricular affiliation etc. - but depending on the correlation to grades and on the availability of their data some may be omitted. After determining which categorizations have the largest spread/most significant impact, I will attempt to combine the variables and form groups that contrast, in order to predict whether a student has good grades or not. The data will (hopefully) be obtained by a Harvard affiliated data bank, notably the Registrar or the Office of Institutional Research. 



```{r}
install.packages("tsibble")
library(tsibble)
```

```{r}
library(tsibble)
   data(package - "tsibble")
```


```{r}
install.packages("jsonlite", repos="https://cran.rstudio.com/")
library("jsonlite")

json_file <- 'https://datahub.io/core/co2-fossil-by-nation/datapackage.json'
json_data <- fromJSON(paste(readLines(json_file), collapse=""))

# get list of all resources:
print(json_data$resources$name)

# print all tabular data(if exists any)
for(i in 1:length(json_data$resources$datahub$type)){
  if(json_data$resources$datahub$type[i]=='derived/csv'){
    path_to_file = json_data$resources$path[i]
    data <- read.csv(url(path_to_file))
    print(data)
  }
}
```

```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)
data
```
```{r}
unique_countries <- data |>
  distinct(Country)
  unique_countries
```

#total emissions for each country across all years

```{r}
total_emissions <- data |>
  group_by(Country) |>
  summarise(total_emissions = sum(Total, na.rm = TRUE)) |>
  arrange(desc(total_emissions))
total_emissions
```



#table with total emissions by country

```{r}
total_emissions |>
ggplot(aes(x = reorder(Country, -total_emissions), y = total_emissions)) +
  geom_col() +
  geom_hline(yintercept = average_emissions) +
  labs(
    x="Country",
    y="Total Emissions",
    title="Total Emissions by Country"
  )
```


#filtered data and averages

```{r}
top10_emissions <- total_emissions |>
  arrange(-total_emissions) |>
  slice(c(1:10))
        top10_emissions
        
average_emissions_top10 <- mean(top10_emissions$total_emissions)
average_emissions_top10
average_emissions_total <- mean(total_emissions$total_emissions)
average_emissions_total
```


#Bar Chart 

```{r}
top10_emissions |>
  ggplot(aes(x = reorder(Country, -total_emissions), y = total_emissions)) +
  geom_bar(stat = "identity") +
  geom_hline(aes(yintercept = average_emissions_total, linetype = "Average for All Countries", color="indianred")) +
  geom_hline(aes(yintercept = average_emissions_top10, linetype = "Average for Top 10 Countries", color="dodgerblue")) +
  labs(x="Country", y="Total Emissions", title="Top 10 Total Emissions by Country") +
  scale_linetype_manual(values=c("Average for All Countries" = "dashed", "Average for Top 10 Countries" = "dotted"), name="Average Line") +
  guides(color = FALSE) + #Remove color legend
  theme(axis.text.x = element_text(angle=45, hjust=1, size=6))
  
```

























