---
title:  "Gov 50 Final Project"
author: "Patrick Pieper"
description: This project investigates the carbon emissions data across various countries since '1751', focusing on identifying and visualizing the differences in emissions. The objective is to pinpoint the highest emitters, compare emissions amongst countries, and highlight the gap between them. 
output:
  distill::distill_article:
    self_contained: false
---


## Project thoughts

I was initially interested in the varying levels of carbon emissions across time. However, when reading the data, I was more intrigued by the difference in countries, as opposed to the difference over time. This led me to a broader investigation aiming to visualize and understand the emissions data better. In doing so, i hope to discover significant insights regarding the emissions spectrum - where countries stand and the gaps that exist between them.


## Data Sources

The primary data source for this project is the CO2 emissions data set retrieved from Datahub, within the scope of a project by the Carbon Dioxide Information Analysis Center (CDIAC). This data set contains historical emissions data - recorded yearly across countries - which allows for a comprehensive analysis observing time and country. The data was accessed using R and relevant packages, such as 'jasonlite'.


## Proposal
The goal is to analyze and visualize the carbon emissions data to draw meaningful comparisons between countries, particularly focusing on the top 10 emitters. The analysis will highlight the emissions difference between adjacent countries on the list, providing a visual representation of the emissions gap. This analysis would open the door for a deeper investigation into the policies and factors contributing to the emissions levels in these countries - potentially also allowing for comparison with related metrics, such as GDP. 

Based on the global emissions data, I anticipate that the key emitters will be predominantly industrialized countries, many of which will be categorized as 'Western'. In addition, BRICS countries should also be up on the list. I also expect the difference in emissions to be more significant the higher a country's emissions are.





```{r}
install.packages("jsonlite", repos="https://cran.rstudio.com/")
library("jsonlite")

json_file <- 'https://datahub.io/core/co2-fossil-by-nation/datapackage.json'
json_data <- fromJSON(paste(readLines(json_file), collapse=""))

# get list of all resources:
print(json_data$resources$name)

# print all tabular data(if exists any)
for(i in 1:length(json_data$resources$datahub$type)){
  if(json_data$resources$datahub$type[i]=='derived/csv'){
    path_to_file = json_data$resources$path[i]
    data <- read.csv(url(path_to_file))
  }
}
```

```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)
```
```{r}
unique_countries <- data |>
  distinct(Country)
  unique_countries
```

#total emissions for each country across all years

```{r}
total_emissions <- data |>
  group_by(Country) |>
  summarise(total_emissions = sum(Total, na.rm = TRUE)) |>
  arrange(desc(total_emissions))
total_emissions
```



#table with total emissions by country

```{r}
average_emissions <- mean(total_emissions$total_emissions, na.rm=TRUE)

total_emissions |>
ggplot(aes(x = reorder(Country, -total_emissions), y = total_emissions)) +
  geom_col() +
  geom_hline(yintercept = average_emissions) +
  labs(
    x="Country",
    y="Total Emissions",
    title="Total Emissions by Country"
  )
```


#filtered data and averages

```{r}
top10_emissions <- total_emissions |>
  arrange(-total_emissions) |>
  slice(c(1:10))
        top10_emissions
        
average_emissions_top10 <- mean(top10_emissions$total_emissions)
average_emissions_top10
average_emissions_total <- mean(total_emissions$total_emissions)
average_emissions_total
```


#Bar Chart 

```{r}
top10_emissions |>
  ggplot(aes(x = reorder(Country, -total_emissions), y = total_emissions)) +
  geom_bar(stat = "identity") +
  geom_hline(aes(yintercept = average_emissions_total, linetype = "Average for All Countries", color="indianred")) +
  geom_hline(aes(yintercept = average_emissions_top10, linetype = "Average for Top 10 Countries", color="dodgerblue")) +
  labs(x="Country", y="Total Emissions", title="Top 10 Total Emissions by Country") +
  scale_linetype_manual(values=c("Average for All Countries" = "dashed", "Average for Top 10 Countries" = "dotted"), name="Average Line") +
  guides(color = FALSE) + #Remove color legend
  theme(axis.text.x = element_text(angle=45, hjust=1, size=6))
  
```


#emission difference






















